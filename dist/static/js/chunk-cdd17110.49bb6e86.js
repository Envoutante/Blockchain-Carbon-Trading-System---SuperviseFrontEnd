(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdd17110"],{"08e8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"20px","background-color":"#ffffff"}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"10px"}},[t._v("🔍关联交易查询")]),a("div",{staticClass:"scrollable-div",staticStyle:{height:"750px"}},[t._l(this.orderList,(function(e,i){return a("el-descriptions",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:i,staticClass:"margin-top",staticStyle:{"margin-top":"10px"},attrs:{column:2,border:""}},[a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-document"}),t._v(" 交易编号 ")]),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",underline:!1},on:{click:function(a){return t.openDialog(e.orderID)}}},[t._v(" "+t._s(e.orderID))])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),t._v(" 乙方 ")]),t._v(" "+t._s(e.purchaseName)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),t._v(" 甲方 ")]),t._v(" "+t._s(e.publishName)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-shopping-cart-1"}),t._v(" 交易类型 ")]),t._v(" "+t._s("SOLD"===e.tradeType?"收购碳排量":"SALE"===e.tradeType?"出售碳排量":"")+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-coin"}),t._v(" 交易量 ")]),t._v(" "+t._s(e.dealNum)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-time"}),t._v(" 时间戳 ")]),t._v(" "+t._s(t.dayjs(1e3*parseInt(e.orderTime)).format("YYYY[年]-MM[月]-DD[日] HH:mm:ss"))+" ")],2)],1)})),a("div",{staticStyle:{height:"700px",display:"flex","justify-content":"center","align-items":"center"}},[t.orderID.length?t._e():a("el-empty",{attrs:{description:"暂无相关交易"}})],1)],2),a("sonDialog",{ref:"son"}),a("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.back}},[t._v("返回上一级")])],1)],1)},n=[],s=a("2465"),o=a("df6f"),r={components:{sonDialog:o["a"]},data:function(){return{listLoading:!0,orderID:[],orderList:[]}},created:function(){this.getOrderID(),this.getOrderList()},methods:{getOrderID:function(){this.orderID=this.$route.query.orderID,console.log("打印"+this.orderID)},getOrderList:function(){var t=this;this.listLoading=!0;for(var e=0;e<this.orderID.length;e++){var a=this.orderID[e];s["a"].getOrder(a).then((function(e){t.orderList.push(e.data.orderListEnterprise[0])}))}this.listLoading=!1},openDialog:function(t){this.$refs.son.open(t)},back:function(){this.$router.push("/trade/list")}}},l=r,c=(a("8e11"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,null,null);e["default"]=d.exports},"0fcb":function(t,e,a){"use strict";a("aeb0")},2465:function(t,e,a){"use strict";var i=a("b775");e["a"]={getTradeList:function(t){return Object(i["a"])({url:"/public/tradeList",method:"post",data:{token:t}})},getOrder:function(t){return Object(i["a"])({url:"/public/order",method:"post",data:{orderID:t}})}}},"247f":function(t,e,a){},"623a":function(t,e,a){},"8e11":function(t,e,a){"use strict";a("247f")},aeb0:function(t,e,a){},df6f:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{staticClass:"orderTrackTXID",attrs:{title:"🔍区块链交易事务日志溯源",width:900,"dialog-style":{top:"20px"},closeable:"",footer:null},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticStyle:{"min-height":"300px"}},[t.loadingData?a("a-result",{attrs:{title:"区块交易事务溯源中..."},scopedSlots:t._u([{key:"icon",fn:function(){return[a("a-icon",{attrs:{type:"loading"}})]},proxy:!0}],null,!1,1196379478)}):a("div",{staticStyle:{padding:"10px 20px"}},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"交易事务哈希",span:3}},[a("span",{staticStyle:{"font-family":"'Consolas', Menlo, Courier, monospace",color:"#134089"}},[t._v(t._s(t.txDetail.txhash))])]),a("a-descriptions-item",{attrs:{label:"有效载荷哈希",span:3}},[a("span",{staticStyle:{"font-family":"'Consolas', Menlo, Courier, monospace",color:"#134089"}},[t._v(" "+t._s(t.txDetail.payload_proposal_hash))])]),a("a-descriptions-item",{attrs:{label:"链码名"}},[t._v(" "+t._s(t.txDetail.chaincodename)+" ")]),a("a-descriptions-item",{attrs:{label:"通道名"}},[t._v(t._s(t.txDetail.channelname)+" ")]),a("a-descriptions-item",{attrs:{label:"交易事务时间"}},[t._v(t._s(t.createdtPrase(t.txDetail.createdt))+" ")]),a("a-descriptions-item",{attrs:{label:"MSP创建者代号"}},[a("a-tag",{attrs:{color:"purple"}},[t._v(" "+t._s(t.txDetail.creator_msp_id)+" ")])],1),a("a-descriptions-item",{attrs:{label:"背书组织代号",span:2}},t._l(t.endorser_msp_id_tags(t.txDetail.endorser_msp_id),(function(e,i){return a("span",{key:i},[a("a-tag",{attrs:{color:"purple"}},[t._v(" "+t._s(e)+" ")])],1)})),0),a("a-descriptions-item",{attrs:{label:"交易事务类型",span:2}},[t._v(" 背书交易 "),a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v("此交易事务已获得特定组织节点的背书，以确保其符合规定的有效性和安全性标准。 ")])]),a("span",{staticStyle:{"padding-bottom":"2px","border-bottom":"1px dashed #495057",cursor:"pointer"}},[t._v("ENDORSER_TRANSACTION")])],2)],1),a("a-descriptions-item",{attrs:{label:"验证状态"}},[t.lang.includes("zh")?a("a-tag",{staticStyle:{"border-radius":"999px"},attrs:{color:"#20c997"}},[t._v(" 已验证 ( VALID ) ")]):a("a-tag",{staticStyle:{"border-radius":"999px"},attrs:{color:"#20c997"}},[t._v(" Valid ")])],1)],1),a("div",[a("div",{staticStyle:{"font-weight":"600",color:"black"}},[a("div",{staticStyle:{width:"50px",height:"10px",background:"#099268",display:"inline-block"}}),t._v(" 读取操作流 ")]),a("json-viewer",{attrs:{value:t.txDetail.read_set,"expand-depth":5,boxed:"",sort:"","show-array-index":!0,copyable:"",theme:"my-awesome-json-theme","line-height":20}},[a("template",{slot:"copy"},[a("a-icon",{attrs:{type:"copy"}}),t._v("复制 ")],1)],2)],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{"font-weight":"600",color:"black"}},[a("div",{staticStyle:{width:"50px",height:"10px",background:"#fa8c16",display:"inline-block"}}),t._v(" 写入操作流 ")]),a("json-viewer",{attrs:{value:t.txDetail.write_set,"expand-depth":5,boxed:"",sort:"","show-array-index":!0,copyable:"",theme:"my-awesome-json-theme","line-height":20}},[a("template",{slot:"copy"},[a("a-icon",{attrs:{type:"copy"}}),t._v("复制 ")],1)],2)],1)],1),t.loadingData?t._e():a("div",{staticStyle:{width:"100%","font-size":"14px","text-align":"center",color:"grey"}},[t._v(" —— 碳 盟 链 道 —— ")])],1)])},n=[],s=(a("ac1f"),a("b775")),o={login:"/auth/login",detailTransaction:"/api/transaction",curChannel:"/api/curChannel"};function r(){return Object(s["a"])({url:"/turnTo",method:"post",data:{url:o.login,urlType:"POST",postBody:{user:"exploreradmin",password:"exploreradminpw",network:"org1-network"}}})}function l(t){return Object(s["a"])({url:"/turnTo",method:"post",data:{url:o.curChannel,urlType:"GET",token:t}})}function c(t,e,a){return Object(s["a"])({url:"/turnTo",method:"post",data:{url:o.detailTransaction+"/"+t+"/"+e,urlType:"GET",token:a}})}var d=a("349e"),p=a.n(d),u=a("5a0c"),h=a.n(u),m=a("0ecf"),f=a.n(m),b={data:function(){return{visible:!1,orderID:"",bE:{bEtoken:"",bEcurrentChannel:""},txDetail:null,loadingData:!0}},components:{JsonViewer:p.a},computed:{lang:function(){return"zh-CN"}},methods:{createdtPrase:function(t){return h.a.extend(f.a),h.a.utc(t).local().format("YYYY-MM-DD HH:mm")},open:function(t){console.log("打印："+t),this.loadingData=!0,this.visible=!0,this.orderID=t,this.login()},login:function(){var t=this;r().then((function(e){t.bE.bEtoken=e.token,l(t.bE.bEtoken).then((function(e){t.bE.bEcurrentChannel=e.currentChannel,t.fetchData()}))}))},fetchData:function(){var t=this;c(this.bE.bEcurrentChannel,this.orderID,this.bE.bEtoken).then((function(e){t.txDetail=e.row,setTimeout((function(){t.loadingData=!1}),700)}))},endorser_msp_id_tags:function(t){var e,a=/"([^"]*)"/g,i=[];while(e=a.exec(t))i.push(e[1]);return i}}},v=b,g=(a("fa67"),a("0fcb"),a("2877")),_=Object(g["a"])(v,i,n,!1,null,"69735a5b",null);e["a"]=_.exports},fa67:function(t,e,a){"use strict";a("623a")}}]);